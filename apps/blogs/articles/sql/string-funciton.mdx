---
title: 字符串函数
description: ""
tags: ["sql"]
poster: ""
date: 2024/04/19
---

### CONCAT 函数

将多个字符串拼接成一个新的字符串

#### 语法

```sql
CONCAT('string1', 'string2', ..., 'stringN')
```

#### 参数说明

| 参数                                | 是否必填 | 说明                                                |
| :---------------------------------- | :------- | :-------------------------------------------------- |
| 'string', 'string2', ..., 'stringN' | 是       | 需要拼接的字符串，多个字符串之间用英文逗号（,）分隔 |

---

#### 示例

将单独的字符串 a、b 和 c 进行拼接，组成一个新的字符串 abc。

```sql
SELECT CONCAT('a', 'b', 'c') AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| abc    |
+--------+
```

返回结果为拼接后的新字符串，且字符串中间无间隔符。

---

### LENGTH 函数

计算字符串的长度

#### 语法

```sql
LENGTH('string')
```

#### 参数说明

| 参数   | 是否必填 | 说明   |
| :----- | :------- | :----- |
| string | 是       | 待匹配 |

#### 示例

计算字符串 abc 的长度。

```sql
SELECT LENGTH('abc') AS len;
```

返回结果：

```sql
+-----+
| len |
+-----+
| 3   |
+-----+
```

---

### LOWER 函数

将字符串中所有的字母都转换成小写字母

#### 语法

```sql
LOWER('string')
```

#### 参数说明

| 参数   | 是否必填 | 说明           |
| :----- | :------- | :------------- |
| string | 是       | 待转换的字符串 |

#### 示例

将字符串 ABC 中所有的字母都转换为小写字母

```sql
SELECT LOWER('ABC') AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| abc    |
+--------+
```

---

### MD5 函数

计算指定字符串的 MD5 值

#### 语法

```sql
MD5('string')
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待匹配的字符串。 |

#### 示例

计算指定字符串 abc 的 MD5 值

```sql
SELECT MD5('abc') AS val;
```

返回结果：

```sql
+----------------------------------+
|               val                |
+----------------------------------+
| 900150983cd24fb0d6963f7d28e17f72 |
+----------------------------------+
```

返回结果为字符串 abc 的 MD5 值。

---

### REPLACE 函数

将匹配指定规则的子串替换为新的字符串。

#### 语法

```sql
REPLACE('string', 'from_str', 'to_str')
```

#### 参数说明

| 参数     | 是否必填 | 说明             |
| :------- | :------- | :--------------- |
| string   | 是       | 待匹配的字符串。 |
| from_str | 是       | 指定字符串。     |
| to_str   | 是       | 替换的字符串。   |

#### 示例

将字符串 abc 中所有匹配 bc 的子串都替换为 cd。

```sql
SELECT REPLACE('abc', 'bc', 'cd') AS val;
```

返回结果：

```sql
+-----+
| val |
+-----+
| acd |
+-----+
```

---

### REVERSE 函数

返回逆序的字符串。

#### 语法

```sql
REVERSE('string')
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待匹配的字符串。 |

#### 示例

将字符串 abc 逆序输出。

```sql
SELECT REVERSE('abc') AS val;
```

返回结果：

```sql
+-----+
| val |
+-----+
| cba |
+-----+
```

---

### REGEXP_REPLACE 函数

从字符串指定位置开始，将匹配指定规则的子串替换为新的字符串。

#### 语法

```sql
REGEXP_REPLACE('string', pattern, rep, [pos])
```

#### 参数说明

| 参数    | 是否必填 | 说明                                                                                       |
| :------ | :------- | :----------------------------------------------------------------------------------------- |
| string  | 是       | 待匹配的字符串。                                                                           |
| pattern | 是       | 正则表达式。                                                                               |
| rep     | 是       | 替换的字符串。                                                                             |
| pos     | 否       | 开始匹配字符串的位置，取值为大于等于 1 的整数。不指定该参数时，默认从第 1 个字符开始匹配。 |

#### 示例

不指定 pos 参数。默认从第 1 个字符开始匹配，并将匹配 b 的子串替换为 cd。

```sql
SELECT REGEXP_REPLACE('abc', 'b', 'c') AS val;
```

返回结果：

```sql
+-----+
| val |
+-----+
| acc |
+-----+
```

返回结果为 acc，表示已将字符串 abc 中匹配 b 的子串替换为 c。

---

### REGEXP_SUBSTR 函数

返回从字符串指定位置开始，匹配指定规则的子串。

#### 语法

```sql
REGEXP_SUBSTR('string', pat, [pos])
```

#### 参数说明

| 参数     | 是否必填 | 说明                                                                                       |
| :------- | :------- | :----------------------------------------------------------------------------------------- |
| string   | 是       | 待匹配的字符串。                                                                           |
| pattern  | 是       | 正则表达式。                                                                               |
| position | 否       | 开始匹配字符串的位置，取值为大于等于 1 的整数。不指定该参数时，默认从第 1 个字符开始匹配。 |

#### 示例

- 示例 1：指定 pos 参数，从字符串 abc 的第 3 个字符开始匹配 b 的子串。

```sql
SELECT REGEXP_SUBSTR('abc', 'b', 3) AS val;
```

返回结果：

```sql
+-----+
| val |
+-----+
|     |
+-----+
```

返回结果为空，表示从字符串第 3 个字符开始无匹配 b 的子串。

- 示例 2：不指定 pos 参数，默认从字符串 abc 的第 1 个字符开始匹配 b 的子串。

```sql
SELECT REGEXP_SUBSTR('abc', 'b') AS val;
```

返回结果：

```sql
+-----+
| val |
+-----+
| b   |
+-----+
```

返回结果为 b，表示从字符串第 1 个字符开始截取匹配 b 的子串。

---

### SUBSTR 函数

返回字符串中指定长度的子串。

#### 语法

```sql
SUBSTR('string', pos, [len])
```

#### 参数说明

| 参数   | 是否必填 | 说明                                                                                                               |
| :----- | :------- | :----------------------------------------------------------------------------------------------------------------- |
| string | 是       | 待匹配的字符串。                                                                                                   |
| pos    | 是       | 开始截取字符串的位置， 取值为大于等于 1 的整数。                                                                   |
| len    | 否       | 从左向右截取字符串的长度，取值为大于等于 1 的整数。不指定该参数时，则默认返回 pos 参数指定位置到字符串末尾的子串。 |

#### 示例

不指定 len 参数，默认返回字符串 abc 第 2 个字符到字符串末尾的子串。

```sql
SELECT SUBSTR('abc', 2) AS val;
```

返回结果：

```sql
+-----+
| val |
+-----+
| bc  |
+-----+
```

### START_WITH 函数

判断字符串的前缀是否为指定字符串。

#### 语法

```sql
START_WITH('string1', 'string2')
```

#### 参数说明

| 参数    | 是否必填 | 说明             |
| :------ | :------- | :--------------- |
| string1 | 是       | 待匹配的字符串。 |
| string2 | 是       | 指定字符串。     |

#### 示例

判断字符串 abc 的前缀是否为指定字符串 ab。

```sql
SELECT START_WITH('abc', 'ab') AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| true   |
+--------+
```

返回结果为 true，表示字符串 abc 的前缀是指定字符串 ab 。

---

### TRIM 函数

删除字符串前后的空格。

#### 语法

```sql
TRIM('string')
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待匹配的字符串。 |

#### 示例

删除指定字符串 abc 前后的空格。

```sql
SELECT TRIM('  abc   ') AS str;
```

返回结果：

```sql
+-----+
| str |
+-----+
| abc |
+-----+
```

返回结果为删除前后空格后的结果。

---

### UPPER 函数

将字符串中所有的字母都转换为大写字母。

#### 语法

```sql
UPPER('string')
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待转换的字符串。 |

#### 示例

将字符串 abc 中所有的字母都转换为大写字母。

```sql
SELECT UPPER('abc') AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| ABC    |
+--------+
```

返回结果为 ABC， 表示已将字符串 abc 中所有的小写字母转换为大写字母 ABC。

---

### LEFT 函数

返回字符串中的前 n 个字符。当 n 为负时，将返回除了最后|n|个字符之外的所有字符。

#### 语法

```sql
LEFT('string', n)
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待转换的字符串。 |
| n      | 是       | 左起 n 个字符    |

#### 示例

获取字符串 abcde 中左边的 2 个字符。

```sql
SELECT LEFT('abcde', 2) AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| ab     |
+--------+
```

返回结果为 ab， 表示已获取左边的 2 个字符。

---

### RIGHT 函数

返回字符串中的最后 n 个字符。如果 n 为负，返回除最前面的|n|个字符外的所有字符。

#### 语法

```sql
RIGHT('string', n)
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待转换的字符串。 |
| n      | 是       | 最后的 n 个字符  |

#### 示例

获取字符串 abcde 中最后的 2 个字符。

```sql
SELECT RIGHT('abcde', 2) AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| de     |
+--------+
```

返回结果为 de， 表示已获取最后的 2 个字符。

---

### LPAD 函数

将 string 通过前置字符 fill（默认是一个空格）填充到长度 len。如果 string 已经长于 len，则它被（从右边）截断。

#### 语法

```sql
LPAD('string', len, [, fill])
```

#### 参数说明

| 参数   | 是否必填 | 说明                       |
| :----- | :------- | :------------------------- |
| string | 是       | 待转换的字符串。           |
| len    | 是       | 填充后的长度               |
| fill   | 否       | 前置填充的字符，默认为空格 |

#### 示例

用 xy 前置填充 hi 到 5 个字符长度。

```sql
SELECT LPAD('hi', 5, 'xy') AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| xyxhi  |
+--------+
```

---

### RPAD 函数

将 string 通过增加字符 fill（默认为一个空格）填充到长度 len。如果 string 已经长于 len 则它会被截断。

#### 语法

```sql
RPAD('string', len, [, fill])
```

#### 参数说明

| 参数   | 是否必填 | 说明                       |
| :----- | :------- | :------------------------- |
| string | 是       | 待转换的字符串。           |
| len    | 是       | 填充后的长度               |
| fill   | 否       | 后置填充的字符，默认为空格 |

#### 示例

用 xy 后置填充 hi 到 5 个字符长度。

```sql
SELECT RPAD('hi', 5, 'xy') AS val;
```

返回结果：

```sql
+--------+
| val    |
+--------+
| hixyx  |
+--------+
```

---

### REPEAT 函数

重复 string 指定的 n 次。

#### 语法

```sql
REPEAT('string', n)
```

#### 参数说明

| 参数   | 是否必填 | 说明             |
| :----- | :------- | :--------------- |
| string | 是       | 待转换的字符串。 |
| n      | 是       | 重复次数         |

#### 示例

```sql
SELECT REPEAT('Pg', 4) AS val;
```

返回结果：

```sql
+----------+
| val      |
+----------+
| PgPgPgPg |
+----------+
```
