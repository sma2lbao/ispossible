---
title: BFC
description: ""
date: 2024/02/01
tags: ["浏览器"]
poster: "https://img0.baidu.com/it/u=3542748506,4060302361&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500"
---

## 什么是 BFC

w3c 是这么解释的：

> 浮动元素和绝对定位元素，非块级盒子的块级容器（例如 inline-blocks, table-cells, 和 table-captions），以及 overflow 值不为“visiable”的块级盒子，都会为他们的内容创建新的块级格式化上下文(block formatting context)。

请注意，BFC 并不是一个 css 属性，也不是一段代码，而是 css 中基于 box 的一个布局对象和单位，它是页面中的一块渲染区域，并且有一套渲染规则，它决定了其子元素将如何定位，以及和其他元素的关系和相互作用。明确地，它是一个独立的盒子，并且这个独立的盒子内部布局不受外界影响，当然，BFC 也不会影响到外面的元素。

## 成为 BFC 的条件

其实在 w3c 规范中已经简单罗列了称为 BFC 的基本条件，但我们还是详细说明下，保持记忆脉络清晰。
一个 BFC 是一个 HTML 盒子并且至少满足下列条件中的任何一个：

- float 的值不为 none
- position 的值不为 static 或者 relative
- display 的值为 table-cell, table-caption, inline-block,flex, 或者 inline-flex 中的其中一个
- overflow 的值不为 visible
- 根元素

## BFC 的特性

BFC 的特性可以总结为以下几点：

- BFC 内部，盒子由上至下按顺序进行排列，其间隙由盒子的外边距决定，并且，当同一个 BFC 中的两个盒子同时具有相对方向的外边距时，其外边距还会发生叠加(Margin Collapse)
- BFC 内部，无论是浮动盒子还是普通盒子，其左总是与包含块的左边相接触（从右到左的的格式，否则为与右边框相接触）
- BFC 区域不会与 float box 区域相叠加
- BFC 内外布局不会相互影响
- 计算 BFC 高度的时候，浮动元素的高度也计算在内

## 触发 BFC

根据成为 BFC 的条件，一般有以下 4 种方法触发 BFC：

- display: table 前后带有换行符，我们一般也不常用
- overflow: scroll 可能会出现不想要的滚动条，丑
- float: left 万一我们不想让元素浮动呢？
- overflow: hidden 比较完美的创建 BFC 的方案，副作用较小，仿佛遇到了我的心动女生

## BFC 能解决的问题

1. 解决 margin collapse(外边距叠加)
   什么是外边距叠加？复述一遍： 当同一个 BFC 中的两个盒子同时具有相对方向的外边距时，外边距会发生叠加(Margin Collapse)，当兄弟盒子的外边距不一样时，将以最大的那个外边距为准。

2. 清除浮动
   想想那些年我们一起清除过的浮动，解决方式是什么？clear: both？父元素一起浮动？这些都没错，但是作为前端开发者，我们解决问题应该需要掌握多种技能，以适应多种不同的问题环境，偶尔还可以装装 X:)
   我们往往会遇到这样一种情况，父元素高度自适应，子元素浮动，因为不在同一文档流中，父元素的高度会坍塌, 这个时候，我们可以利用 BFC 来解决问题，根据是：计算 BFC 高度的时候，浮动元素的高度也计算在内
   我们通过添加 overflow: hidden，在容器中创建一个新的 BFC

3. 实现两栏布局
   一般的后台管理系统，很多都是传统的左菜单右内容的两栏布局，我们经常会选择左栏浮动，右边设置左 padding 或者 margin 的思路来实现这一做法，其实利用 BFC 也可以创建两栏布局，根据是：BFC 区域不会与 float box 区域相叠加
